{% extends 'dataexport/header.html' %}


{% comment %}
{% include "internal-tools/header.html" %}

<link rel="stylesheet" href="{{STATIC_URL}}/videokheti/css/bootstrap.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
 <script type="text/javascript"  src="{{STATIC_URL}}social_website/scripts/libs/external/jquery-1.12.4.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />



<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

<style type="text/css">
.errorlist{
	color: red;
}
.error{
	color: red;
}
.ml-30{
	margin-top: 40px;
}
</style>

<section id="upload-data" class="about-bg">

	<div class="wrapper">
		<div class="inner-wrapper">
			<h2 class="hdg-a hdg-source-lt layout-vr-md">Data Extraction</h2>
			<div class="row">
				<div class="col-sm-12">
					<form id="data-upload" class="form-horizontal" action="" method="post" enctype="multipart/form-data" target="_blank">
						{% csrf_token %}
						<div class="form-group row ml-30">


							<label for="date_period" class="col-sm-2 col-form-label">Select Date</label>

							<div {% if form.date_period.errors %} class="col-sm-7" {% else %} class="col-sm-7" {% endif %}>
								{{ form.date_period }}
							</div>
							<label class="col-sm-3">{% if form.date_period.errors %}{{ form.date_period.errors}}{% endif %}</label>
						</div>



						<div class="form-group row ml-30">
							<label for="data_category" class="col-sm-2 col-form-label">Data Category</label>
							<div {% if form.data_category.errors %} class="col-sm-7" {% else %} class="col-sm-7" {% endif %}>
								{{ form.data_category }}
							</div>
							<label class="col-sm-3">{% if form.data_category.errors %}{{ form.data_category.errors}}{% endif %}</label>
						</div>

						
						<div class="form-group row ml-30">
							<label for="data" class="col-sm-2 col-form-label">Data</label>
							<div {% if form.data.errors %} class="col-sm-7" {% else %} class="col-sm-7" {% endif %}>
								{{ form.data }}
							</div>
							<label class="col-sm-3">{% if form.data.errors %}{{ form.data.errors}}{% endif %}</label>
						</div>

						<div class="form-group row ml-30">
							<label for="data" class="col-sm-2 col-form-label">Country</label>
							<div {% if form.data.errors %} class="col-sm-7" {% else %} class="col-sm-7" {% endif %}>
								{{ form.country }}
							</div>
							<label class="col-sm-3">{% if form.data.errors %}{{ form.country.errors}}{% endif %}</label>
						</div>
						<div class="form-group row ml-30">
							<label for="data" class="col-sm-2 col-form-label">State</label>
							<div {% if form.data.errors %} class="col-sm-7" {% else %} class="col-sm-7" {% endif %}>
								{{ form.state }}
							</div>
							<label class="col-sm-3">{% if form.state.errors %}{{ form.state.errors}}{% endif %}</label>
						</div>

						<div class="form-group row ml-30">
							<div class="col-sm-2"></div>
							<div class="col-sm-8">
								<button type="submit" id="upload" class="btn btn-success pull-right">Submit</button>
							</div>
						</div>

					</form>
				</div>
				<br>
			</div>
		</div> <!-- End .inner-wrapper -->
	</div> <!-- End .wrapper -->
</section>

<script type="text/javascript">
	jQuery(document).ready(function ($) {
	 start_date = "", end_date = ""
	 $('input[name="date_period"]').daterangepicker({
	 	autoUpdateInput: true,
	 	locale: {
	      format: 'YYYY-MM-DD'
	    },
	    autoApply:true,
	    maxDate: new Date(),
	    maxSpan:{
	    	'years': 1
	    }
	 })

		$('#id_data').select2({placeholder: "Select data for screening or Adoption",allowClear: true});
		$('#id_data_category').select2({placeholder: "Select data for health or Agriculture",allowClear: true});
		$('#id_country').select2({placeholder: "Select Country",allowClear: true});
		$('#id_state').select2({});

	});

</script>

<script type="text/javascript">
	$('#id_country').on('change', function() {
		$("#id_state").html('').select2({data: [{id: '', text: ''}]});
		// $('#id_state').val('').trigger('change');
    var country_id = $("#id_country option:selected").val();
    	$.ajax({
			  type: "GET",
			  url: "/coco/export/get/state/"+country_id+'/',
			  datatype: 'json',
			  success: function(data){
			  	console.log(data)
			     $("#id_state").select2({data: data.results});
			  }
			});
    });

$('li[class=grid-rt]').click(function(){
   	$('.user-dropdown').toggle();
   })

</script>

{% endcomment %}
