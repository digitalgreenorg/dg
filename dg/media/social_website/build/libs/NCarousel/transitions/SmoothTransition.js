define(["require","libs/NCarousel/transitions/Transition","framework/Util"],function(e){var t=e("libs/NCarousel/transitions/Transition"),n=e("framework/Util"),r=t.extend({_state:null,constructor:function(e){this.base(e),this._state={speedScaler:-1}},_bindEvents:function(){this._getDOMReference("carouselContainer").on("mousemove",this._onMouseMove.bind(this)),this._carouselConfig("pauseOnExit")&&this._getDOMReference("carouselContainer").on("mouseleave",this._onMouseLeave.bind(this))},_onMouseMove:function(e){if(this._carouselState("disableCarousel")==1)return;var t=this._getDOMReference("carouselWrapper"),n,r;if(this._direction=="horizontal")var n=t.outerWidth()/2,r=e.pageX-t.offset().left;else var n=t.outerHeight()/2,r=e.pageY-t.offset().top;var i=r-n,s=i<0?-1:1,o=i/(n*.83);o-=.1*s,i*o<=0&&(o=0),Math.abs(o)>1&&(o=s),o*=-1,this._state.speedScaler=o.toFixed(2)},_onMouseLeave:function(){this._state.speedScaler=0},_prepareSlides:function(){this.base()},triggerTransition:function(e,t){this._carouselConfig("autoPlay")||(this._state.speedScaler=0);var n,r,i;this._carouselConfig("direction")=="vertical"?(r="top",i="height",n=this._slideSize.height*this._numberOfSlides):(r="left",i="width",n=this._slideSize.width*this._numberOfSlides);var s=(new Date).getTime(),o=setInterval(function(){if(this._disableCarousel==1||this._state.speedScaler==0){s=(new Date).getTime();return}var e=((new Date).getTime()-s)/1e3,t=this._$carouselList.position()[r];t+=this._smoothTransitionSpeed*e*this._state.speedScaler,this._smoothCycle?t<-1*n?t+=n:t>0&&(t-=n):t<this._containerSize[i]-n?t=this._containerSize[i]-n:t>0&&(t=0),this._$carouselList.css(r,Math.round(t)+"px"),s=(new Date).getTime()},1e3/this._smoothTransitionFPS)}});return r});