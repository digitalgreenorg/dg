define([],function(){var e=function(e,t){this._delimiter=e||"/",this._externalBroadcastFunctions=[],this._broadcastArgs=null,this.addBroadcast(t);var n=window;n.addEventListener?n.addEventListener("hashchange",this._onHashChange.bind(this)):n.attachEvent("onhashchange",this._onHashChange.bind(this)),this.broadcast()};return e.prototype.addBroadcast=function(e){return e&&typeof e=="function"&&this._externalBroadcastFunctions.push(e),this},e.prototype.removeBroadcast=function(e){var t=0,n=this._externalBroadcastFunctions.length;for(;t<n;t++)this._externalBroadcastFunctions[t]==e&&this._externalBroadcastFunctions.splice(t,1);return this},e.prototype._onHashChange=function(){this.broadcast()},e.prototype.broadcast=function(e){e=e||this._broadcastArgs,this._broadcastArgs=null;var t=window.location.hash;t=this._stripLeadingCharacters(t);var n=t==""?[]:t.split(this._delimiter+"");return this._callBroadcastFunctions(n,e),this},e.prototype._callBroadcastFunctions=function(e,t){var n=this._externalBroadcastFunctions,r=n.length;if(r==0)return;var i=0;for(;i<r;i++)n[i](e,t)},e.prototype._stripLeadingCharacters=function(e){var t=new RegExp("^#("+this._delimiter+")*");return e.replace(t,"")},e.prototype.go=function(e,t){e instanceof Array&&(e=e.join(this._delimiter));if(typeof e!="string")throw"Router.go(): invalid location provided.";e=this._stripLeadingCharacters(e),this._broadcastArgs=t,window.location.hash="#"+this._delimiter+e},e});