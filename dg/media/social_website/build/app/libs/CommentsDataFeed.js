define(["require","app/libs/DigitalGreenDataFeed","app/libs/DataModel","framework/Util"],function(e){var t=e("app/libs/DigitalGreenDataFeed"),n=e("app/libs/DataModel"),r=e("framework/Util"),i=t.extend({constructor:function(){this.base("api/comment/"),this._dataModel.addSubModel("objects",!0),this.addInputParam("offset",!1,0),this.addInputParam("limit",!1,10)},fetch:function(e,t,n){e==undefined&&(e=0),t==undefined&&(t=12),this.setInputParam("offset",e,!0),this.setInputParam("limit",t,!0),this.base(null,n)},_processData:function(e){this.base(e);if(e.objects==undefined&&e.uid!=undefined){this.clearCommentCache();var t=[];return t}var n=this._dataModel,r=n.get("objects"),i=e.meta.limit,s=e.meta.offset;n.set("totalCount",e.meta.total_count);var t=e.objects,o=s*i;return r.addSubset(t,o),t},setInputParam:function(e,t,n){var r=this.base(e,t);return r&&!n&&this.clearCommentCache(),r},clearCommentCache:function(){this._dataModel.get("objects").clear()},getTotalCount:function(){return this._dataModel.get("totalCount")},getComments:function(){var e=this.getInputParam("offset"),t=this.getInputParam("limit"),n=this._dataModel.get("objects").getSubset(e*t,t);return n?n:(this.fetch(e,t),!1)}});return i});