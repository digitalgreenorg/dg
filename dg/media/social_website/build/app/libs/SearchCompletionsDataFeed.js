define(["require","app/libs/DigitalGreenDataFeed","app/libs/DataModel"],function(e){var t=e("app/libs/DigitalGreenDataFeed"),n=e("app/libs/DataModel"),r=t.extend({constructor:function(){this.base("api/searchCompletions"),this._dataModel.addSubModel("searchCompletions",!0),this.addInputParam("searchString",!0,""),this.addInputParam("maxCount",!1,10)},fetch:function(e,t){e==undefined&&(e=0),t==undefined&&(t=10),this.setInputParam("searchString",e,!0),this.setInputParam("maxCount",t,!0),this.base()},_processData:function(e){this.base(e);var t=this._dataModel,n=t.get("searchCompletions"),r=e.completions;return n.clear(),n.addSubset(r,0),r},setInputParam:function(e,t,n){var r=this.base(e,t);return r&&!n&&this.clearSearchCompletionCache(),r},clearSearchCompletionCache:function(){this._dataModel.get("searchCompletions").clear()},getSearchItems:function(){var e=this.getInputParam("searchString"),t=this.getInputParam("maxCount"),n=this._dataModel.get("searchCompletions").getSubset(0,t);return n?n:(this.fetch(e,t),!1)}});return r});