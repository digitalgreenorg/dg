define(["require","app/libs/DigitalGreenDataFeed","app/libs/DataModel","framework/Util"],function(e){var t=e("app/libs/DigitalGreenDataFeed"),n=e("app/libs/DataModel"),r=e("framework/Util"),i=t.extend({constructor:function(){this.base("api/activity/"),this._dataModel.addSubModel("newsItems",!0),this.addInputParam("offset",!1,0),this.addInputParam("limit",!1,10),this.addInputParam("newsFeed",!1,1)},fetch:function(e,t){e==undefined&&(e=0),t==undefined&&(t=12),this.setInputParam("offset",e*t,!0),this.setInputParam("limit",t,!0),this.setInputParam("newsFeed",1,!0),this.base()},_processData:function(e){this.base(e);var t=this._dataModel,n=t.get("newsItems"),r=e.meta.limit,i=e.meta.offset;t.set("totalCount",e.totalCount);var s=e.objects,o=i;return n.addSubset(s,o),s},setInputParam:function(e,t,n){var r=this.base(e,t);return r&&!n&&this.clearNewsItemCache(),r},clearNewsItemCache:function(){this._dataModel.get("newsItems").clear()},getTotalCount:function(){return this._dataModel.get("totalCount")},getNewsItems:function(){var e=this.getInputParam("offset"),t=this.getInputParam("limit"),n=this._dataModel.get("newsItems").getSubset(e*t,t);return n?n:(this.fetch(e,t),!1)}});return i});