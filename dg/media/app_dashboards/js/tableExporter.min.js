!function(e){e.fn.tableExport=function(t,name){function n(){var e=i.find("thead th"),t=[];return e.each(function(e,n){c.length?c.forEach(function(a){a==e+1&&t.push(n.innerText)}):t.push(n.innerText)}),t}function a(){var t=i.find("tbody tr"),n=[];return t.each(function(t,a){var o=[];if(c.length)c.forEach(function(t){o.push(e(a).find("td:nth-child("+t+")").text())}),n.push(o);else{var r=e(a).find("td");r.each(function(e,t){o.push(t.innerText)}),n.push(o)}}),n}function o(e,t,n){var a=document.createElement("a");a.href=URL.createObjectURL(new Blob([e],{type:f[n]}));for(var o=new Date,r=["DD:"+o.getDate(),"MM:"+o.getDate(),"YY:"+o.getFullYear(),"hh:"+o.getHours(),"mm:"+o.getMinutes(),"ss:"+o.getSeconds()],i=0;i<r.length;i++){var c=r[i].split(":")[0],l=r[i].split(":")[1];t=t.replace("%"+c+"%",l)}a.download=t+"."+n,a.click(),a.remove()}var r=e.extend({filename:name,format:"csv",cols:"",head_delimiter:";",column_delimiter:";",onbefore:function(e){},onafter:function(e){}},t),t=e.extend(r,t),i=e(this),c=t.cols?t.cols.split(","):[],l="",f={csv:"text/csv",txt:"text/plain",xls:"application/vnd.ms-excel",json:"application/json"};if(!("function"==typeof t.onbefore&&"function"==typeof t.onafter&&t.format&&t.head_delimiter&&t.column_delimiter&&t.filename))return console.error("One of the parameters is incorrect."),!1;switch(t.onafter(i),t.format){case"csv":var h=n(),d=a();l+=h.join(t.head_delimiter)+"\n",d.forEach(function(e,n){l+=e.join(t.column_delimiter)+"\n"});break;case"txt":var h=n(),d=a();l+=h.join(t.head_delimiter)+"\n",d.forEach(function(e,n){l+=e.join(t.column_delimiter)+"\n"});break;case"xls":var h=n(),d=a();template="<table><thead>%thead%</thead><tbody>%tbody%</tbody></table>";var u="";h.forEach(function(e,t){u+="<th>"+e+"</th>"}),template=template.replace("%thead%",u),u="",d.forEach(function(e,t){u+="<tr>",e.forEach(function(e,t){u+="<td>"+e+"</td>"}),u+="</tr>"}),template=template.replace("%tbody%",u),l=template;break;case"sql":var h=n(),d=a();d.forEach(function(e,t){l+="INSERT INTO table ("+h.join(",")+") VALUES ('"+e.join("','")+"');"})}o(l,t.filename,t.format),t.onbefore(i)}}(jQuery);